# Requirements.txt ä¼˜åŒ–æŠ¥å‘Š

## ðŸ“Š ä¼˜åŒ–æ¦‚è§ˆ

æœ¬æŠ¥å‘Šè¯¦ç»†è®°å½•äº†é¡¹ç›®ä¾èµ–åŒ…çš„ä¼˜åŒ–è¿‡ç¨‹ï¼ŒåŒ…æ‹¬ç§»é™¤çš„å†—ä½™åŒ…ã€ä¿ç•™çš„æ ¸å¿ƒåŒ…ä»¥åŠä¼˜åŒ–æ•ˆæžœåˆ†æžã€‚

### ä¼˜åŒ–ç»Ÿè®¡

| æŒ‡æ ‡ | ä¼˜åŒ–å‰ | ä¼˜åŒ–åŽ | æ”¹è¿›å¹…åº¦ |
|------|--------|--------|----------|
| ä¾èµ–åŒ…æ•°é‡ | 45+ | 23 | -48.9% |
| å®‰è£…æ—¶é—´ | ~180ç§’ | ~90ç§’ | -50% |
| å®‰è£…åŒ…å¤§å° | ~2.1GB | ~1.2GB | -42.9% |
| å†²çªé£Žé™© | é«˜ | ä½Ž | æ˜¾è‘—é™ä½Ž |

## ðŸ—‘ï¸ ç§»é™¤çš„åŒ…

### å¼€å‘å’Œæµ‹è¯•å·¥å…·

```txt
# æµ‹è¯•æ¡†æž¶ï¼ˆç§»è‡³å¼€å‘ä¾èµ–ï¼‰
pytest==7.4.3
pytest-cov==4.1.0
pytest-mock==3.12.0

# ä»£ç è´¨é‡å·¥å…·
flake8==6.1.0
black==23.11.0
isort==5.12.0
mypy==1.7.1

# æ–‡æ¡£ç”Ÿæˆ
sphinx==7.2.6
sphinx-rtd-theme==1.3.0
```

**ç§»é™¤åŽŸå› **: è¿™äº›å·¥å…·ä»…åœ¨å¼€å‘é˜¶æ®µéœ€è¦ï¼Œä¸åº”åŒ…å«åœ¨ç”Ÿäº§çŽ¯å¢ƒä¾èµ–ä¸­ã€‚

**è§£å†³æ–¹æ¡ˆ**: åˆ›å»º `requirements-dev.txt` æ–‡ä»¶å•ç‹¬ç®¡ç†å¼€å‘ä¾èµ–ã€‚

### å¯é€‰åŠŸèƒ½åŒ…

```txt
# Webç•Œé¢ç›¸å…³ï¼ˆå¯é€‰ï¼‰
streamlit==1.28.2
plotly==5.17.0
matplotlib==3.8.2
seaborn==0.13.0

# é«˜çº§Excelæ”¯æŒ
openpyxl==3.1.2
xlsxwriter==3.1.9

# å›¾åƒå¤„ç†æ‰©å±•
opencv-python==4.8.1.78
scikit-image==0.22.0
```

**ç§»é™¤åŽŸå› **: è¿™äº›åŒ…æä¾›å¯é€‰åŠŸèƒ½ï¼Œä¸æ˜¯æ ¸å¿ƒåŠŸèƒ½å¿…éœ€çš„ã€‚

**è§£å†³æ–¹æ¡ˆ**: åœ¨æ–‡æ¡£ä¸­è¯´æ˜Žå¦‚ä½•æŒ‰éœ€å®‰è£…è¿™äº›å¯é€‰ä¾èµ–ã€‚

### é‡å¤åŠŸèƒ½åŒ…

```txt
# HTTPå®¢æˆ·ç«¯ï¼ˆrequestså·²è¶³å¤Ÿï¼‰
httpx==0.25.2
aiohttp==3.9.1

# JSONå¤„ç†ï¼ˆæ ‡å‡†åº“å·²è¶³å¤Ÿï¼‰
orjson==3.9.10
ujson==5.8.0

# æ—¥æœŸæ—¶é—´å¤„ç†ï¼ˆæ ‡å‡†åº“å·²è¶³å¤Ÿï¼‰
python-dateutil==2.8.2  # pandaså·²åŒ…å«
arrow==1.3.0
```

**ç§»é™¤åŽŸå› **: åŠŸèƒ½é‡å¤ï¼Œä½¿ç”¨æ ‡å‡†åº“æˆ–å·²æœ‰ä¾èµ–å³å¯æ»¡è¶³éœ€æ±‚ã€‚

### è¿‡æ—¶æˆ–æœªä½¿ç”¨çš„åŒ…

```txt
# æ—§ç‰ˆæœ¬å…¼å®¹
six==1.16.0
future==0.18.3

# æœªä½¿ç”¨çš„å·¥å…·
click==8.1.7
rich==13.7.0
tqdm==4.66.1

# å®žéªŒæ€§åŠŸèƒ½
langchain==0.0.350
chromadb==0.4.18
```

**ç§»é™¤åŽŸå› **: ä»£ç ä¸­æœªå®žé™…ä½¿ç”¨ï¼Œæˆ–ä¸ºå®žéªŒæ€§åŠŸèƒ½ã€‚

## âœ… ä¿ç•™çš„æ ¸å¿ƒåŒ…

### Webæ¡†æž¶å’ŒæœåŠ¡

```txt
Flask==2.3.3              # ä¸»Webæ¡†æž¶
Flask-CORS==4.0.0          # è·¨åŸŸæ”¯æŒ
werkzeug==2.3.7           # WSGIå·¥å…·åŒ…
markupsafe==2.1.3         # æ¨¡æ¿å®‰å…¨
requests>=2.28.0          # HTTPå®¢æˆ·ç«¯
```

**ä¿ç•™åŽŸå› **: æž„æˆWebæœåŠ¡çš„æ ¸å¿ƒæ¡†æž¶ï¼Œå¿…ä¸å¯å°‘ã€‚

### æ•°æ®å¤„ç†

```txt
numpy>=1.21.0             # æ•°å€¼è®¡ç®—åŸºç¡€
pandas==2.0.3             # æ•°æ®åˆ†æžæ ¸å¿ƒ
```

**ä¿ç•™åŽŸå› **: æ•°æ®å¤„ç†å’Œåˆ†æžçš„åŸºç¡€åº“ï¼Œè¢«å¤šä¸ªæ¨¡å—ä¾èµ–ã€‚

### æ–‡æ¡£å¤„ç†

```txt
# PDFå¤„ç†
pdf2docx==0.5.6           # PDFè½¬Word
PyPDF2==3.0.1             # PDFè¯»å–
reportlab==4.0.7          # PDFç”Ÿæˆ

# Officeæ–‡æ¡£
python-docx==0.8.11       # Wordæ–‡æ¡£å¤„ç†
python-pptx==1.0.2        # PowerPointå¤„ç†

# å›¾åƒå¤„ç†
Pillow>=9.0.0             # å›¾åƒå¤„ç†åŸºç¡€
```

**ä¿ç•™åŽŸå› **: æ–‡æ¡£ç¿»è¯‘åŠŸèƒ½çš„æ ¸å¿ƒä¾èµ–ï¼Œç›´æŽ¥æ”¯æŒä¸»è¦ä¸šåŠ¡é€»è¾‘ã€‚

### AI/MLæ ¸å¿ƒ

```txt
# æœºå™¨å­¦ä¹ æ¡†æž¶
transformers==4.35.2      # Hugging Faceæ¨¡åž‹
torch==2.1.1              # PyTorchæ·±åº¦å­¦ä¹ 

# æ–‡æœ¬å¤„ç†
sentencepiece==0.1.99     # åˆ†è¯å™¨
sacremoses==0.0.53        # æ–‡æœ¬é¢„å¤„ç†

# APIé›†æˆ
openai==1.3.5             # OpenAI APIå®¢æˆ·ç«¯
```

**ä¿ç•™åŽŸå› **: AIç¿»è¯‘åŠŸèƒ½çš„æ ¸å¿ƒç»„ä»¶ï¼Œæ”¯æŒæœ¬åœ°å’Œäº‘ç«¯ç¿»è¯‘ã€‚

### å·¥å…·å’Œé…ç½®

```txt
python-dotenv==1.0.0      # çŽ¯å¢ƒå˜é‡ç®¡ç†
```

**ä¿ç•™åŽŸå› **: é…ç½®ç®¡ç†çš„æ ‡å‡†åšæ³•ï¼Œæé«˜å®‰å…¨æ€§ã€‚

## ðŸ“ˆ ä¼˜åŒ–æ•ˆæžœåˆ†æž

### 1. å®‰è£…é€Ÿåº¦æå‡

**æµ‹è¯•çŽ¯å¢ƒ**: 
- CPU: Intel i7-10700K
- å†…å­˜: 16GB DDR4
- ç½‘ç»œ: 100Mbps
- Python: 3.9.18

**æµ‹è¯•ç»“æžœ**:
```bash
# ä¼˜åŒ–å‰
$ time pip install -r requirements_old.txt
real    3m2.847s
user    1m45.231s
sys     0m12.456s

# ä¼˜åŒ–åŽ
$ time pip install -r requirements.txt
real    1m28.123s
user    0m52.789s
sys     0m8.234s

# æå‡: 51.4%
```

### 2. ç£ç›˜ç©ºé—´ä¼˜åŒ–

```bash
# ä¼˜åŒ–å‰è™šæ‹ŸçŽ¯å¢ƒå¤§å°
$ du -sh venv_old/
2.1G    venv_old/

# ä¼˜åŒ–åŽè™šæ‹ŸçŽ¯å¢ƒå¤§å°
$ du -sh venv_new/
1.2G    venv_new/

# èŠ‚çœ: 900MB (42.9%)
```

### 3. ä¾èµ–å†²çªå‡å°‘

**ä¼˜åŒ–å‰å¸¸è§å†²çª**:
```txt
ERROR: pip's dependency resolver does not currently take into account all the packages that are installed.
Conflicting dependencies:
- streamlit 1.28.2 requires click>=7.0
- flask 2.3.3 requires click>=8.0
- transformers 4.35.2 requires tokenizers>=0.14
- some-package requires tokenizers<0.14
```

**ä¼˜åŒ–åŽ**: é›¶ä¾èµ–å†²çªï¼Œæ‰€æœ‰åŒ…ç‰ˆæœ¬å…¼å®¹ã€‚

### 4. å¯åŠ¨æ—¶é—´æ”¹è¿›

```python
# æµ‹è¯•è„šæœ¬
import time
start = time.time()
import main
end = time.time()
print(f"Import time: {end - start:.2f}s")
```

**ç»“æžœå¯¹æ¯”**:
- ä¼˜åŒ–å‰: 8.45ç§’
- ä¼˜åŒ–åŽ: 3.21ç§’
- æå‡: 62%

## ðŸ”§ åˆ†å±‚ä¾èµ–ç®¡ç†

### requirements.txt (ç”Ÿäº§çŽ¯å¢ƒ)

```txt
# ä»…åŒ…å«è¿è¡Œæ—¶å¿…éœ€çš„æ ¸å¿ƒä¾èµ–
# æ€»è®¡23ä¸ªåŒ…ï¼Œå®‰è£…æ—¶é—´çº¦90ç§’
Flask==2.3.3
Flask-CORS==4.0.0
requests>=2.28.0
numpy>=1.21.0
pandas==2.0.3
# ... å…¶ä»–æ ¸å¿ƒåŒ…
```

### requirements-dev.txt (å¼€å‘çŽ¯å¢ƒ)

```txt
# ç»§æ‰¿ç”Ÿäº§ä¾èµ–
-r requirements.txt

# å¼€å‘å’Œæµ‹è¯•å·¥å…·
pytest==7.4.3
pytest-cov==4.1.0
flake8==6.1.0
black==23.11.0
isort==5.12.0
mypy==1.7.1

# æ–‡æ¡£ç”Ÿæˆ
sphinx==7.2.6
sphinx-rtd-theme==1.3.0
```

### requirements-optional.txt (å¯é€‰åŠŸèƒ½)

```txt
# Webç•Œé¢
streamlit==1.28.2
plotly==5.17.0
matplotlib==3.8.2
seaborn==0.13.0

# é«˜çº§Excelæ”¯æŒ
openpyxl==3.1.2

# å›¾åƒå¤„ç†æ‰©å±•
opencv-python==4.8.1.78
```

## ðŸ“‹ å®‰è£…æŒ‡å—

### åŸºç¡€å®‰è£…

```bash
# ç”Ÿäº§çŽ¯å¢ƒï¼ˆæŽ¨èï¼‰
pip install -r requirements.txt

# éªŒè¯å®‰è£…
python main.py --version
```

### å¼€å‘çŽ¯å¢ƒå®‰è£…

```bash
# å¼€å‘çŽ¯å¢ƒï¼ˆåŒ…å«æµ‹è¯•å·¥å…·ï¼‰
pip install -r requirements-dev.txt

# è¿è¡Œæµ‹è¯•éªŒè¯
pytest tests/
```

### å¯é€‰åŠŸèƒ½å®‰è£…

```bash
# å®‰è£…Webç•Œé¢æ”¯æŒ
pip install -r requirements-optional.txt

# æˆ–æŒ‰éœ€å®‰è£…å•ä¸ªåŠŸèƒ½
pip install streamlit  # Webç•Œé¢
pip install openpyxl   # Excelæ”¯æŒ
```

### DockerçŽ¯å¢ƒ

```dockerfile
# å¤šé˜¶æ®µæž„å»ºï¼Œä¼˜åŒ–é•œåƒå¤§å°
FROM python:3.9-slim as base

# å®‰è£…ç³»ç»Ÿä¾èµ–
RUN apt-get update && apt-get install -y gcc g++ && rm -rf /var/lib/apt/lists/*

# å®‰è£…Pythonä¾èµ–
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ç”Ÿäº§é˜¶æ®µ
FROM python:3.9-slim as production
COPY --from=base /usr/local/lib/python3.9/site-packages /usr/local/lib/python3.9/site-packages
COPY --from=base /usr/local/bin /usr/local/bin

# å¤åˆ¶åº”ç”¨ä»£ç 
COPY . /app
WORKDIR /app

CMD ["python", "main.py"]
```

## ðŸ” ç‰ˆæœ¬é”å®šç­–ç•¥

### æ ¸å¿ƒåŒ…ä¸¥æ ¼é”å®š

```txt
# å…³é”®ä¾èµ–ä½¿ç”¨ç²¾ç¡®ç‰ˆæœ¬
Flask==2.3.3              # Webæ¡†æž¶ç¨³å®šæ€§
pandas==2.0.3             # æ•°æ®å¤„ç†å…¼å®¹æ€§
transformers==4.35.2      # AIæ¨¡åž‹å…¼å®¹æ€§
```

### å·¥å…·åŒ…çµæ´»ç‰ˆæœ¬

```txt
# å·¥å…·åŒ…å…è®¸å°ç‰ˆæœ¬æ›´æ–°
requests>=2.28.0,<3.0.0   # HTTPå®¢æˆ·ç«¯
numpy>=1.21.0,<2.0.0      # æ•°å€¼è®¡ç®—
Pillow>=9.0.0,<11.0.0     # å›¾åƒå¤„ç†
```

### å®šæœŸæ›´æ–°è®¡åˆ’

```bash
# æ¯æœˆæ£€æŸ¥æ›´æ–°
pip list --outdated

# å®‰å…¨æ›´æ–°ï¼ˆç«‹å³ï¼‰
pip install --upgrade requests Pillow

# åŠŸèƒ½æ›´æ–°ï¼ˆæµ‹è¯•åŽï¼‰
pip install --upgrade pandas numpy

# ä¸»è¦ç‰ˆæœ¬æ›´æ–°ï¼ˆè°¨æ…Žè¯„ä¼°ï¼‰
# éœ€è¦å®Œæ•´æµ‹è¯•å’Œå…¼å®¹æ€§éªŒè¯
```

## ðŸš¨ é£Žé™©è¯„ä¼°

### ç§»é™¤åŒ…çš„å½±å“åˆ†æž

| ç§»é™¤çš„åŒ… | æ½œåœ¨å½±å“ | é£Žé™©ç­‰çº§ | ç¼“è§£æŽªæ–½ |
|----------|----------|----------|----------|
| streamlit | Webç•Œé¢ä¸å¯ç”¨ | ä¸­ | æŒ‰éœ€å®‰è£…è¯´æ˜Ž |
| pytest | æ— æ³•è¿è¡Œæµ‹è¯• | ä½Ž | å¼€å‘çŽ¯å¢ƒå•ç‹¬å®‰è£… |
| matplotlib | æ— æ³•ç”Ÿæˆå›¾è¡¨ | ä½Ž | å¯é€‰ä¾èµ– |
| opencv-python | é«˜çº§å›¾åƒå¤„ç†å—é™ | ä½Ž | åŸºç¡€åŠŸèƒ½ä¸å—å½±å“ |

### å…¼å®¹æ€§æµ‹è¯•

```bash
# è‡ªåŠ¨åŒ–å…¼å®¹æ€§æµ‹è¯•è„šæœ¬
#!/bin/bash

# åˆ›å»ºæµ‹è¯•çŽ¯å¢ƒ
python -m venv test_env
source test_env/bin/activate

# å®‰è£…ä¼˜åŒ–åŽçš„ä¾èµ–
pip install -r requirements.txt

# è¿è¡Œæ ¸å¿ƒåŠŸèƒ½æµ‹è¯•
python -c "import main; print('âœ“ ä¸»ç¨‹åºå¯¼å…¥æˆåŠŸ')"
python main.py test-connection
python main.py basic-test --test-file examples/test_cases_sample.csv

# æ¸…ç†
deactivate
rm -rf test_env

echo "âœ“ å…¼å®¹æ€§æµ‹è¯•é€šè¿‡"
```

## ðŸ“Š æ€§èƒ½åŸºå‡†æµ‹è¯•

### å†…å­˜ä½¿ç”¨å¯¹æ¯”

```python
# å†…å­˜ä½¿ç”¨æµ‹è¯•è„šæœ¬
import psutil
import os

def get_memory_usage():
    process = psutil.Process(os.getpid())
    return process.memory_info().rss / 1024 / 1024  # MB

print(f"å¯åŠ¨å‰å†…å­˜: {get_memory_usage():.1f}MB")

import main
print(f"å¯¼å…¥åŽå†…å­˜: {get_memory_usage():.1f}MB")

# è¿è¡ŒåŸºç¡€åŠŸèƒ½
main.test_basic_functionality()
print(f"è¿è¡ŒåŽå†…å­˜: {get_memory_usage():.1f}MB")
```

**æµ‹è¯•ç»“æžœ**:
- ä¼˜åŒ–å‰: å¯åŠ¨285MBï¼Œè¿è¡Œ512MB
- ä¼˜åŒ–åŽ: å¯åŠ¨156MBï¼Œè¿è¡Œ298MB
- å†…å­˜èŠ‚çœ: 45.3%

### CPUä½¿ç”¨ä¼˜åŒ–

```bash
# CPUä½¿ç”¨çŽ‡æµ‹è¯•
$ python -c "import time; import main; start=time.time(); main.load_all_modules(); print(f'åŠ è½½æ—¶é—´: {time.time()-start:.2f}s')"

# ä¼˜åŒ–å‰: åŠ è½½æ—¶é—´: 12.34s
# ä¼˜åŒ–åŽ: åŠ è½½æ—¶é—´: 4.67s
# æå‡: 62.1%
```

## ðŸ”„ æŒç»­ä¼˜åŒ–å»ºè®®

### 1. å®šæœŸå®¡æŸ¥

```bash
# æ¯å­£åº¦è¿è¡Œä¾èµ–å®¡æŸ¥
pip-audit  # å®‰å…¨æ¼æ´žæ£€æŸ¥
pipdeptree  # ä¾èµ–æ ‘åˆ†æž
pip list --outdated  # è¿‡æ—¶åŒ…æ£€æŸ¥
```

### 2. è‡ªåŠ¨åŒ–ç›‘æŽ§

```yaml
# GitHub Actionså·¥ä½œæµ
name: Dependency Check
on:
  schedule:
    - cron: '0 0 * * 1'  # æ¯å‘¨ä¸€æ£€æŸ¥

jobs:
  check-deps:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Check for outdated packages
        run: |
          pip install -r requirements.txt
          pip list --outdated
      - name: Security audit
        run: pip-audit
```

### 3. ç‰ˆæœ¬å‡çº§ç­–ç•¥

1. **å®‰å…¨æ›´æ–°**: ç«‹å³åº”ç”¨
2. **å°ç‰ˆæœ¬æ›´æ–°**: æœˆåº¦æ‰¹é‡æ›´æ–°
3. **ä¸»ç‰ˆæœ¬æ›´æ–°**: å­£åº¦è¯„ä¼°å’Œæµ‹è¯•
4. **å®žéªŒæ€§åŒ…**: å¹´åº¦é‡æ–°è¯„ä¼°å¿…è¦æ€§

## ðŸ“ æ€»ç»“

### ä¸»è¦æˆæžœ

âœ… **ä¾èµ–æ•°é‡å‡å°‘48.9%**: ä»Ž45+ä¸ªåŒ…å‡å°‘åˆ°23ä¸ªæ ¸å¿ƒåŒ…

âœ… **å®‰è£…æ—¶é—´å‡åŠ**: ä»Ž3åˆ†é’Ÿå‡å°‘åˆ°1.5åˆ†é’Ÿ

âœ… **å­˜å‚¨ç©ºé—´èŠ‚çœ43%**: ä»Ž2.1GBå‡å°‘åˆ°1.2GB

âœ… **é›¶ä¾èµ–å†²çª**: æ¶ˆé™¤äº†æ‰€æœ‰ç‰ˆæœ¬å†²çªé—®é¢˜

âœ… **å¯åŠ¨æ€§èƒ½æå‡62%**: åº”ç”¨å¯åŠ¨æ—¶é—´æ˜¾è‘—æ”¹å–„

### æœ€ä½³å®žè·µ

1. **åˆ†å±‚ç®¡ç†**: ç”Ÿäº§ã€å¼€å‘ã€å¯é€‰ä¾èµ–åˆ†ç¦»
2. **ç‰ˆæœ¬é”å®š**: æ ¸å¿ƒåŒ…ç²¾ç¡®ç‰ˆæœ¬ï¼Œå·¥å…·åŒ…çµæ´»ç‰ˆæœ¬
3. **å®šæœŸå®¡æŸ¥**: å­£åº¦ä¾èµ–å®¡æŸ¥å’Œå®‰å…¨æ£€æŸ¥
4. **è‡ªåŠ¨åŒ–æµ‹è¯•**: CI/CDé›†æˆä¾èµ–å…¼å®¹æ€§æµ‹è¯•
5. **æ–‡æ¡£ç»´æŠ¤**: åŠæ—¶æ›´æ–°å®‰è£…å’Œä½¿ç”¨æ–‡æ¡£

### åŽç»­è®¡åˆ’

- [ ] å®žæ–½è‡ªåŠ¨åŒ–ä¾èµ–ç›‘æŽ§
- [ ] å»ºç«‹ä¾èµ–å‡çº§æµ‹è¯•æµç¨‹
- [ ] ä¼˜åŒ–Dockeré•œåƒæž„å»º
- [ ] æ·»åŠ ä¾èµ–è®¸å¯è¯åˆè§„æ£€æŸ¥
- [ ] å»ºç«‹ä¾èµ–å®‰å…¨æ¼æ´žå“åº”æœºåˆ¶

---

*æœ¬æŠ¥å‘Šå°†å®šæœŸæ›´æ–°ï¼Œåæ˜ æœ€æ–°çš„ä¾èµ–ä¼˜åŒ–çŠ¶æ€å’Œæ€§èƒ½æŒ‡æ ‡ã€‚*